<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pre-Fire Plan: Construction</title>
    <link rel="stylesheet" href="styles-preplan.css">
</head>
<body>
    <div class="page-wrapper">
        <div class="container">
            <header class="report-header">
                <div class="header-top">
                    <img src="images/cfd-logo.png" alt="Centerville Fire Department Logo" class="patch-logo">
                    <div class="header-text">
                        <h1>Centerville Fire Department</h1>
                        <h2>Pre-Fire Plan Data Sheet</h2>
                    </div>
                </div>
            </header>

            <div class="progress-indicator">Page 4 of 12: Construction</div>
            <div class="progress-bar-container">
                <div class="progress-bar" style="width: 33.33%"></div>
            </div>

            <h3 class="section-title">4. Construction Details</h3>

            <form id="construction-form">
                <div class="preplan-section">
                    <label class="inline-label">Overall Type of Construction:</label>
                    <div class="apparatus-buttons construction-buttons">
                        <label class="apparatus-btn"><input type="radio" name="construction_type" value="fire_resistive"><span>Type I - Fire Resistive</span></label>
                        <label class="apparatus-btn"><input type="radio" name="construction_type" value="non_combustible"><span>Type II - Non-Combustible</span></label>
                        <label class="apparatus-btn"><input type="radio" name="construction_type" value="ordinary"><span>Type III - Ordinary</span></label>
                        <label class="apparatus-btn"><input type="radio" name="construction_type" value="heavy_timber"><span>Type IV - Heavy Timber</span></label>
                        <label class="apparatus-btn"><input type="radio" name="construction_type" value="wood"><span>Type V - Wood Frame</span></label>
                    </div>
                </div>

                <div class="preplan-section">
                    <label class="inline-label">Building Dimensions:</label>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="length">Length (ft):</label>
                            <input type="text" id="length" name="length" placeholder="e.g., 200">
                        </div>
                        <div class="form-field">
                            <label for="width">Width (ft):</label>
                            <input type="text" id="width" name="width" placeholder="e.g., 150">
                        </div>
                        <div class="form-field">
                            <label for="height">Height (ft):</label>
                            <input type="text" id="height" name="height" placeholder="e.g., 40">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="total_sq_ft">Total Square Footage:</label>
                            <input type="text" id="total_sq_ft" name="total_sq_ft" placeholder="e.g., 30,000">
                        </div>
                        <div class="form-field">
                            <label for="num_stories">Number of Stories:</label>
                            <input type="text" id="num_stories" name="num_stories" placeholder="e.g., 2">
                        </div>
                    </div>
                </div>

                <div class="preplan-section">
                    <label class="inline-label">Roof Construction:</label>
                    <div class="form-field">
                        <input type="text" id="roof_construction" name="roof_construction" placeholder="e.g., Metal deck, built-up roof">
                    </div>
                    <label class="inline-label" style="margin-top: 16px;">Roof Trusses:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="roof_trusses" value="Yes"><span>Yes</span></label>
                        <label class="apparatus-btn"><input type="radio" name="roof_trusses" value="No"><span>No</span></label>
                    </div>
                    <div class="form-field" style="margin-top: 16px;">
                        <label for="deck_material">Deck Material:</label>
                        <input type="text" id="deck_material" name="deck_material" placeholder="e.g., Plywood, OSB, Metal">
                    </div>
                </div>

                <div class="preplan-section">
                    <label class="inline-label">Floor Construction:</label>
                    <div class="form-field">
                        <input type="text" id="floor_construction" name="floor_construction" placeholder="e.g., Concrete slab, wood joist">
                    </div>
                    <label class="inline-label" style="margin-top: 16px;">Floor Trusses:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="floor_trusses" value="Yes"><span>Yes</span></label>
                        <label class="apparatus-btn"><input type="radio" name="floor_trusses" value="No"><span>No</span></label>
                    </div>
                </div>

                <div class="preplan-section">
                    <div class="form-field">
                        <label for="wall_construction">Wall Construction:</label>
                        <input type="text" id="wall_construction" name="wall_construction" placeholder="e.g., CMU block, steel frame, wood stud">
                    </div>
                </div>

                <div class="preplan-section">
                    <label class="inline-label">Combustible Concealed Spaces:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="concealed_spaces" value="Yes"><span>Yes</span></label>
                        <label class="apparatus-btn"><input type="radio" name="concealed_spaces" value="No"><span>No</span></label>
                    </div>
                    <label class="inline-label" style="margin-top: 16px;">Locations:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="checkbox" name="concealed_attic" value="Yes"><span>Attic</span></label>
                        <label class="apparatus-btn"><input type="checkbox" name="concealed_cockloft" value="Yes"><span>Cockloft</span></label>
                        <label class="apparatus-btn"><input type="checkbox" name="concealed_crawl" value="Yes"><span>Crawl Space</span></label>
                    </div>
                    <div class="form-field" style="margin-top: 16px;">
                        <label for="concealed_other">Other:</label>
                        <input type="text" id="concealed_other" name="concealed_other" placeholder="Describe other concealed spaces">
                    </div>
                </div>

                <div class="preplan-section">
                    <label class="inline-label">Interior Fire Barriers and Walls:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="fire_barriers" value="Yes"><span>Yes</span></label>
                        <label class="apparatus-btn"><input type="radio" name="fire_barriers" value="No"><span>No</span></label>
                    </div>
                    <div class="form-field" style="margin-top: 16px;">
                        <label for="fire_barriers_locs">Locations:</label>
                        <input type="text" id="fire_barriers_locs" name="fire_barriers_locs" placeholder="Describe fire barrier locations">
                    </div>
                </div>

                <div class="preplan-section">
                    <label class="inline-label">Vertical Openings:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="vertical_openings" value="Yes"><span>Yes</span></label>
                        <label class="apparatus-btn"><input type="radio" name="vertical_openings" value="No"><span>No</span></label>
                    </div>
                    <div class="form-field" style="margin-top: 16px;">
                        <label for="vertical_type_locs">Type and Locations:</label>
                        <input type="text" id="vertical_type_locs" name="vertical_type_locs" placeholder="e.g., Stairwells, elevator shafts">
                    </div>
                    <div class="form-field" style="margin-top: 8px;">
                        <label for="opening_protected">Opening Protected by:</label>
                        <input type="text" id="opening_protected" name="opening_protected" placeholder="e.g., Fire doors, dampers">
                    </div>
                </div>

                <div class="preplan-section">
                    <label class="inline-label">Interior Stairs:</label>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="stairs_number">Number:</label>
                            <input type="text" id="stairs_number" name="stairs_number">
                        </div>
                        <div class="form-field">
                            <label for="stairs_locations">Locations:</label>
                            <input type="text" id="stairs_locations" name="stairs_locations">
                        </div>
                        <div class="form-field">
                            <label for="stairs_obstructions">Obstructions:</label>
                            <input type="text" id="stairs_obstructions" name="stairs_obstructions">
                        </div>
                    </div>
                </div>

                <div class="preplan-section">
                    <label class="inline-label">Elevators:</label>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="elevators_number">Number:</label>
                            <input type="text" id="elevators_number" name="elevators_number">
                        </div>
                        <div class="form-field">
                            <label for="elevators_locations">Locations:</label>
                            <input type="text" id="elevators_locations" name="elevators_locations">
                        </div>
                    </div>
                    <label class="inline-label" style="margin-top: 16px;">Areas Serviced:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="elevators_serviced" value="full"><span>Full Building</span></label>
                        <label class="apparatus-btn"><input type="radio" name="elevators_serviced" value="partial"><span>Partial</span></label>
                    </div>
                    <label class="inline-label" style="margin-top: 16px;">Fire Service Mode:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="fire_service_mode" value="Yes"><span>Yes</span></label>
                        <label class="apparatus-btn"><input type="radio" name="fire_service_mode" value="No"><span>No</span></label>
                    </div>
                    <div class="form-row" style="margin-top: 16px;">
                        <div class="form-field">
                            <label for="elevator_key_loc">Elevator Key Location:</label>
                            <input type="text" id="elevator_key_loc" name="elevator_key_loc">
                        </div>
                        <div class="form-field">
                            <label for="elevator_controls_loc">Elevator Controls Location:</label>
                            <input type="text" id="elevator_controls_loc" name="elevator_controls_loc">
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" id="prev-btn" class="btn-secondary">← Previous</button>
                    <button type="button" id="next-btn" class="btn-primary">Next → Fire Protection</button>
                </div>
            </form>
        </div>

        <footer>
            <img src="images/city-logo.png" alt="City of Centerville Logo" class="city-logo">
            <p>© 2026 City of Centerville Fire Department</p>
        </footer>
    </div>

    <div id="toast-container" class="toast-container"></div>

    <script>
        const form = document.getElementById('construction-form');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');

        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `<span>${message}</span>`;
            container.appendChild(toast);
            setTimeout(() => { toast.style.opacity = '0'; setTimeout(() => toast.remove(), 300); }, 3000);
        }

        function getSavedData() {
            return JSON.parse(localStorage.getItem('preFirePlan') || '{}');
        }

        function saveData() {
            const data = { ...getSavedData() };
            form.querySelectorAll('input, textarea').forEach(el => {
                if (el.type === 'radio') {
                    if (el.checked) data[el.name] = el.value;
                } else if (el.type === 'checkbox') {
                    data[el.name] = el.checked ? el.value : '';
                } else if (el.value) {
                    data[el.name] = el.value;
                }
            });
            localStorage.setItem('preFirePlan', JSON.stringify(data));
        }

        window.addEventListener('load', () => {
            const saved = getSavedData();
            Object.keys(saved).forEach(key => {
                const el = form.elements[key];
                if (!el) return;
                if (el.length) {
                    el.forEach(e => {
                        if ((e.type === 'radio' || e.type === 'checkbox') && saved[key] === e.value) e.checked = true;
                    });
                } else if (el.type === 'checkbox') {
                    el.checked = saved[key] === el.value;
                } else {
                    el.value = saved[key] || '';
                }
            });
        });

        form.addEventListener('input', () => saveData());
        form.addEventListener('change', () => saveData());

        function navigate(url) { saveData(); window.location.href = url; }

        prevBtn.addEventListener('click', () => navigate('page3-occupancy.html'));
        nextBtn.addEventListener('click', () => {
            if (form.checkValidity()) {
                saveData();
                showToast('Data saved', 'success');
                setTimeout(() => navigate('page5-fire-protection.html'), 500);
            } else { form.reportValidity(); }
        });
    </script>
</body>
</html>
