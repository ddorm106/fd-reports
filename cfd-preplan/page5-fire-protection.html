<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pre-Fire Plan: Fire Protection Services</title>
    <link rel="stylesheet" href="styles-preplan.css">
</head>
<body>
    <div class="page-wrapper">
        <div class="container">
            <header class="report-header">
                <div class="header-top">
                    <img src="images/cfd-logo.png" alt="Centerville Fire Department Logo" class="patch-logo">
                    <div class="header-text">
                        <h1>Centerville Fire Department</h1>
                        <h2>Pre-Fire Plan Data Sheet</h2>
                    </div>
                </div>
            </header>

            <div class="progress-indicator">Page 5 of 12: Fire Protection Services</div>
            <div class="progress-bar-container">
                <div class="progress-bar" style="width: 41.66%"></div>
            </div>

            <h3 class="section-title">5. Fire Protection Services</h3>

            <form id="fire-protection-form">
                <!-- Hydrant Locations -->
                <div class="preplan-section">
                    <label class="inline-label">Hydrant Locations:</label>
                    <div class="form-row">
                        <div class="form-field">
                            <label for="primary_hydrant">Primary Hydrant:</label>
                            <input type="text" id="primary_hydrant" name="primary_hydrant" placeholder="e.g., Corner of Main St & 1st Ave">
                        </div>
                        <div class="form-field">
                            <label for="secondary_hydrant">Secondary Hydrant:</label>
                            <input type="text" id="secondary_hydrant" name="secondary_hydrant" placeholder="Location of backup hydrant">
                        </div>
                    </div>
                </div>

                <!-- Fire Pumps -->
                <div class="preplan-section">
                    <label class="inline-label">Fire Pumps:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="fire_pumps" value="Yes"><span>Yes</span></label>
                        <label class="apparatus-btn"><input type="radio" name="fire_pumps" value="No"><span>No</span></label>
                    </div>
                    
                    <label class="inline-label" style="margin-top: 16px;">Supplied by:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="checkbox" name="supplied_public" value="Yes"><span>Public Supply</span></label>
                        <label class="apparatus-btn"><input type="checkbox" name="supplied_private" value="Yes"><span>Private</span></label>
                        <label class="apparatus-btn"><input type="checkbox" name="supplied_gravity" value="Yes"><span>Gravity Tank</span></label>
                        <label class="apparatus-btn"><input type="checkbox" name="supplied_lake" value="Yes"><span>Lake/Pond</span></label>
                    </div>
                    <div class="form-field" style="margin-top: 16px;">
                        <label for="supplied_other">Other Supply:</label>
                        <input type="text" id="supplied_other" name="supplied_other" placeholder="Describe other water supply">
                    </div>
                    
                    <label class="inline-label" style="margin-top: 16px;">Fire Pumps Start-up:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="pumps_startup" value="automatic"><span>Automatic</span></label>
                        <label class="apparatus-btn"><input type="radio" name="pumps_startup" value="manual"><span>Manual</span></label>
                    </div>
                    
                    <div class="form-row" style="margin-top: 16px;">
                        <div class="form-field">
                            <label for="num_pumps"># of Pumps:</label>
                            <input type="text" id="num_pumps" name="num_pumps">
                        </div>
                        <div class="form-field">
                            <label for="pumps_loc">Location of Pumps:</label>
                            <input type="text" id="pumps_loc" name="pumps_loc" placeholder="e.g., Pump room, basement">
                        </div>
                    </div>
                </div>

                <!-- Sprinkler System -->
                <div class="preplan-section">
                    <label class="inline-label">Sprinklered:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="sprinklered" value="Yes"><span>Yes</span></label>
                        <label class="apparatus-btn"><input type="radio" name="sprinklered" value="No"><span>No</span></label>
                    </div>
                    
                    <label class="inline-label" style="margin-top: 16px;">Type of Sprinkler:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="sprinkler_type" value="wet"><span>Wet</span></label>
                        <label class="apparatus-btn"><input type="radio" name="sprinkler_type" value="dry"><span>Dry</span></label>
                        <label class="apparatus-btn"><input type="radio" name="sprinkler_type" value="deluge"><span>Deluge</span></label>
                        <label class="apparatus-btn"><input type="radio" name="sprinkler_type" value="pre_action"><span>Pre-Action</span></label>
                    </div>
                    <div class="form-field" style="margin-top: 16px;">
                        <label for="sprinkler_other">Other Type:</label>
                        <input type="text" id="sprinkler_other" name="sprinkler_other">
                    </div>
                    
                    <label class="inline-label" style="margin-top: 16px;">Extent of Coverage:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="sprinkler_coverage" value="full"><span>Full</span></label>
                        <label class="apparatus-btn"><input type="radio" name="sprinkler_coverage" value="partial"><span>Partial</span></label>
                    </div>
                    <div class="form-field" style="margin-top: 16px;">
                        <label for="areas_protected">Areas Protected:</label>
                        <input type="text" id="areas_protected" name="areas_protected" placeholder="Describe sprinklered areas">
                    </div>
                </div>

                <!-- Valve Locations -->
                <div class="preplan-section">
                    <div class="form-row">
                        <div class="form-field">
                            <label for="main_valves_loc">Location of Main Valves:</label>
                            <input type="text" id="main_valves_loc" name="main_valves_loc" placeholder="e.g., Riser room, main entrance">
                        </div>
                        <div class="form-field">
                            <label for="sectional_valves_loc">Location of Sectional Valves:</label>
                            <input type="text" id="sectional_valves_loc" name="sectional_valves_loc">
                        </div>
                    </div>
                    <div class="form-field" style="margin-top: 16px;">
                        <label for="fdc_loc">Location of FDC (Fire Dept Connection):</label>
                        <input type="text" id="fdc_loc" name="fdc_loc" placeholder="e.g., Front of building, Side A">
                    </div>
                </div>

                <!-- Standpipe -->
                <div class="preplan-section">
                    <label class="inline-label">Standpipe:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="standpipe" value="wet"><span>Wet</span></label>
                        <label class="apparatus-btn"><input type="radio" name="standpipe" value="dry"><span>Dry</span></label>
                        <label class="apparatus-btn"><input type="radio" name="standpipe" value="none"><span>None</span></label>
                    </div>
                    
                    <label class="inline-label" style="margin-top: 16px;">Combined with Sprinkler System:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="standpipe_combined" value="Yes"><span>Yes</span></label>
                        <label class="apparatus-btn"><input type="radio" name="standpipe_combined" value="No"><span>No</span></label>
                    </div>
                    
                    <label class="inline-label" style="margin-top: 16px;">Type of Standpipe:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="standpipe_type" value="1"><span>Class I</span></label>
                        <label class="apparatus-btn"><input type="radio" name="standpipe_type" value="2"><span>Class II</span></label>
                        <label class="apparatus-btn"><input type="radio" name="standpipe_type" value="3"><span>Class III</span></label>
                    </div>
                    <div class="form-field" style="margin-top: 16px;">
                        <label for="standpipe_outlets">Standpipe Outlet Locations:</label>
                        <input type="text" id="standpipe_outlets" name="standpipe_outlets" placeholder="e.g., Each floor stairwell">
                    </div>
                </div>

                <!-- Fire Alarm System -->
                <div class="preplan-section">
                    <label class="inline-label">Fire Alarm System:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="fire_alarm" value="Yes"><span>Yes</span></label>
                        <label class="apparatus-btn"><input type="radio" name="fire_alarm" value="No"><span>No</span></label>
                    </div>
                    
                    <div class="form-row" style="margin-top: 16px;">
                        <div class="form-field">
                            <label for="panel_loc">Panel Location:</label>
                            <input type="text" id="panel_loc" name="panel_loc" placeholder="e.g., Main entrance lobby">
                        </div>
                        <div class="form-field">
                            <label for="annunciator_loc">Annunciator Location:</label>
                            <input type="text" id="annunciator_loc" name="annunciator_loc">
                        </div>
                    </div>
                    
                    <div class="form-field" style="margin-top: 16px;">
                        <label for="alarm_type">Type of Alarm:</label>
                        <input type="text" id="alarm_type" name="alarm_type" placeholder="e.g., Addressable, conventional, voice evac">
                    </div>
                    
                    <label class="inline-label" style="margin-top: 16px;">Extent of Coverage:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="alarm_coverage" value="complete"><span>Complete</span></label>
                        <label class="apparatus-btn"><input type="radio" name="alarm_coverage" value="partial"><span>Partial</span></label>
                    </div>
                    
                    <label class="inline-label" style="margin-top: 16px;">Monitored System:</label>
                    <div class="apparatus-buttons">
                        <label class="apparatus-btn"><input type="radio" name="monitored" value="Yes"><span>Yes</span></label>
                        <label class="apparatus-btn"><input type="radio" name="monitored" value="No"><span>No</span></label>
                    </div>
                    
                    <div class="form-row" style="margin-top: 16px;">
                        <div class="form-field">
                            <label for="alarm_company">Alarm Company:</label>
                            <input type="text" id="alarm_company" name="alarm_company">
                        </div>
                        <div class="form-field">
                            <label for="alarm_tel">Alarm Company Tel:</label>
                            <input type="tel" id="alarm_tel" name="alarm_tel" placeholder="(XXX) XXX-XXXX">
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" id="prev-btn" class="btn-secondary">← Previous</button>
                    <button type="button" id="next-btn" class="btn-primary">Next → Utilities</button>
                </div>
            </form>
        </div>

        <footer>
            <img src="images/city-logo.png" alt="City of Centerville Logo" class="city-logo">
            <p>© 2026 City of Centerville Fire Department</p>
        </footer>
    </div>

    <div id="toast-container" class="toast-container"></div>

    <script>
        const form = document.getElementById('fire-protection-form');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');

        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `<span>${message}</span>`;
            container.appendChild(toast);
            setTimeout(() => { toast.style.opacity = '0'; setTimeout(() => toast.remove(), 300); }, 3000);
        }

        function getSavedData() {
            return JSON.parse(localStorage.getItem('preFirePlan') || '{}');
        }

        function saveData() {
            const data = { ...getSavedData() };
            form.querySelectorAll('input, textarea').forEach(el => {
                if (el.type === 'radio') {
                    if (el.checked) data[el.name] = el.value;
                } else if (el.type === 'checkbox') {
                    data[el.name] = el.checked ? el.value : '';
                } else if (el.value) {
                    data[el.name] = el.value;
                }
            });
            localStorage.setItem('preFirePlan', JSON.stringify(data));
        }

        window.addEventListener('load', () => {
            const saved = getSavedData();
            Object.keys(saved).forEach(key => {
                const el = form.elements[key];
                if (!el) return;
                if (el.length) {
                    el.forEach(e => {
                        if ((e.type === 'radio' || e.type === 'checkbox') && saved[key] === e.value) e.checked = true;
                    });
                } else if (el.type === 'checkbox') {
                    el.checked = saved[key] === el.value;
                } else {
                    el.value = saved[key] || '';
                }
            });
        });

        form.addEventListener('input', () => saveData());
        form.addEventListener('change', () => saveData());

        function navigate(url) { saveData(); window.location.href = url; }

        prevBtn.addEventListener('click', () => navigate('page4-construction.html'));
        nextBtn.addEventListener('click', () => {
            if (form.checkValidity()) {
                saveData();
                showToast('Data saved', 'success');
                setTimeout(() => navigate('page6-utilities.html'), 500);
            } else { form.reportValidity(); }
        });
    </script>
</body>
</html>
