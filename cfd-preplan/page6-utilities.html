<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pre-Fire Plan: Utilities</title>
    <link rel="stylesheet" href="styles-preplan.css">
</head>
<body>
    <div class="page-wrapper">
        <div class="container">
            <header class="report-header">
                <div class="header-top">
                    <img src="images/cfd-logo.png" alt="Centerville Fire Department Logo" class="patch-logo">
                    <div class="header-text">
                        <h1>Centerville Fire Department</h1>
                        <h2>Pre-Fire Plan Data Sheet</h2>
                    </div>
                </div>
            </header>

            <div class="progress-indicator">Page 6 of 12: Utilities</div>
            <div class="progress-bar-container">
                <div class="progress-bar" style="width: 50%"></div>
            </div>

            <h3 class="section-title">6. Utilities Information</h3>

            <form id="utilities-form">
                <table>
                    <thead>
                        <tr>
                            <th style="width: 150px;">Present</th>
                            <th style="width: 150px;">Service</th>
                            <th>Shutoff Location</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>
                                <div class="yes-no-buttons">
                                    <label class="apparatus-btn"><input type="radio" name="natural_gas" value="Yes"><span>Yes</span></label>
                                    <label class="apparatus-btn"><input type="radio" name="natural_gas" value="No"><span>No</span></label>
                                </div>
                            </td>
                            <td><strong>Natural Gas</strong></td>
                            <td><input type="text" name="natural_gas_shutoff" placeholder="e.g., Meter on Side C"></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="yes-no-buttons">
                                    <label class="apparatus-btn"><input type="radio" name="lp_gas" value="Yes"><span>Yes</span></label>
                                    <label class="apparatus-btn"><input type="radio" name="lp_gas" value="No"><span>No</span></label>
                                </div>
                            </td>
                            <td><strong>LP Gas</strong></td>
                            <td><input type="text" name="lp_gas_shutoff" placeholder="e.g., Tank behind building"></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="yes-no-buttons">
                                    <label class="apparatus-btn"><input type="radio" name="electric" value="Yes"><span>Yes</span></label>
                                    <label class="apparatus-btn"><input type="radio" name="electric" value="No"><span>No</span></label>
                                </div>
                            </td>
                            <td><strong>Electric</strong></td>
                            <td><input type="text" name="electric_shutoff" placeholder="e.g., Main panel in utility room"></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="yes-no-buttons">
                                    <label class="apparatus-btn"><input type="radio" name="emergency_power" value="Yes"><span>Yes</span></label>
                                    <label class="apparatus-btn"><input type="radio" name="emergency_power" value="No"><span>No</span></label>
                                </div>
                            </td>
                            <td><strong>Emergency Power / Generator</strong></td>
                            <td><input type="text" name="emergency_power_shutoff" placeholder="e.g., Generator pad, exterior NE corner"></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="yes-no-buttons">
                                    <label class="apparatus-btn"><input type="radio" name="solar_power" value="Yes"><span>Yes</span></label>
                                    <label class="apparatus-btn"><input type="radio" name="solar_power" value="No"><span>No</span></label>
                                </div>
                            </td>
                            <td><strong>Solar / PV System</strong></td>
                            <td><input type="text" name="solar_power_shutoff" placeholder="e.g., Roof array, rapid shutdown at main panel"></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="yes-no-buttons">
                                    <label class="apparatus-btn"><input type="radio" name="hvac_system" value="Yes"><span>Yes</span></label>
                                    <label class="apparatus-btn"><input type="radio" name="hvac_system" value="No"><span>No</span></label>
                                </div>
                            </td>
                            <td><strong>HVAC System</strong></td>
                            <td><input type="text" name="hvac_shutoff" placeholder="e.g., Mechanical room, rooftop units"></td>
                        </tr>
                        <tr>
                            <td>
                                <div class="yes-no-buttons">
                                    <label class="apparatus-btn"><input type="radio" name="water_main" value="Yes"><span>Yes</span></label>
                                    <label class="apparatus-btn"><input type="radio" name="water_main" value="No"><span>No</span></label>
                                </div>
                            </td>
                            <td><strong>Water Main</strong></td>
                            <td><input type="text" name="water_main_shutoff" placeholder="e.g., Street valve, utility room"></td>
                        </tr>
                    </tbody>
                </table>

                <div class="preplan-section">
                    <div class="form-field">
                        <label for="utility_notes">Additional Utility Notes:</label>
                        <textarea id="utility_notes" name="utility_notes" rows="4" placeholder="Any special considerations for utilities (high voltage areas, battery storage, etc.)"></textarea>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" id="prev-btn" class="btn-secondary">← Previous</button>
                    <button type="button" id="next-btn" class="btn-primary">Next → Special Rescue</button>
                </div>
            </form>
        </div>

        <footer>
            <img src="images/city-logo.png" alt="City of Centerville Logo" class="city-logo">
            <p>© 2026 City of Centerville Fire Department</p>
        </footer>
    </div>

    <div id="toast-container" class="toast-container"></div>

    <script>
        const form = document.getElementById('utilities-form');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');

        function showToast(message, type = 'info') {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `<span>${message}</span>`;
            container.appendChild(toast);
            setTimeout(() => { toast.style.opacity = '0'; setTimeout(() => toast.remove(), 300); }, 3000);
        }

        function getSavedData() {
            return JSON.parse(localStorage.getItem('preFirePlan') || '{}');
        }

        function saveData() {
            const data = { ...getSavedData() };
            form.querySelectorAll('input, textarea').forEach(el => {
                if (el.type === 'radio') {
                    if (el.checked) data[el.name] = el.value;
                } else if (el.value) {
                    data[el.name] = el.value;
                }
            });
            localStorage.setItem('preFirePlan', JSON.stringify(data));
        }

        window.addEventListener('load', () => {
            const saved = getSavedData();
            Object.keys(saved).forEach(key => {
                const el = form.elements[key];
                if (!el) return;
                if (el.length) {
                    el.forEach(e => {
                        if (e.type === 'radio' && saved[key] === e.value) e.checked = true;
                    });
                } else {
                    el.value = saved[key] || '';
                }
            });
        });

        form.addEventListener('input', () => saveData());
        form.addEventListener('change', () => saveData());

        function navigate(url) { saveData(); window.location.href = url; }

        prevBtn.addEventListener('click', () => navigate('page5-fire-protection.html'));
        nextBtn.addEventListener('click', () => {
            if (form.checkValidity()) {
                saveData();
                showToast('Data saved', 'success');
                setTimeout(() => navigate('page7-special-rescue.html'), 500);
            } else { form.reportValidity(); }
        });
    </script>
</body>
</html>
